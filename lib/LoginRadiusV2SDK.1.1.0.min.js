var LoginRadiusSDK=function(){function e(e){if(!window[e])return!1;var t="test",n=window[e];try{return n.setItem(t,"1"),n.removeItem(t),!0}catch(o){return!1}}function t(t){return e("localStorage")&&null!==localStorage.getItem(t)&&void 0!==localStorage.getItem(t)&&""!==localStorage.getItem(t)?localStorage.getItem(t):e("sessionStorage")&&null!==sessionStorage.getItem(t)&&void 0!==sessionStorage.getItem(t)&&""!==sessionStorage.getItem(t)?sessionStorage.getItem(t):documentCookies.getItem(t)}function n(t,n){var o=!0;e("localStorage")&&(localStorage.setItem(t,n),o=!1),e("sessionStorage")&&(sessionStorage.setItem(t,n),o=!1),o&&documentCookies.setItem(t,n,"",window.location)}function o(e){-1!=e.origin.indexOf("hub.loginradius.com")&&loginradiushtml5passToken(e.data)}!function(e,t){"use strict";var n=function(){var t=function(){for(var t=e.location.hash?e.location.hash.substr(1).split("&"):[],n={},o=0;o<t.length;o++){var i=t[o].split("=");n[i[0]]=decodeURIComponent(i[1])}return n},n=function(t){var n=[];for(var o in t)n.push(o+"="+encodeURIComponent(t[o]));e.location.hash=n.join("&")};return{get:function(e){var n=t();return e?n[e]:n},add:function(e){var o=t();for(var i in e)o[i]=e[i];n(o)},remove:function(e){e="string"==typeof e?[e]:e;for(var o=t(),i=0;i<e.length;i++)delete o[e[i]];n(o)},clear:function(){n({})}}}();e.hash=n}(window);var i="https://api.loginradius.com",a="LRTokenKey",s={},c={};c.isauthenticated=!1,c.setLoginCallback=function(e){c.onlogin=e},documentCookies={getItem:function(e){return e?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},setItem:function(e,t,n,o,i,a){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var s="",c={getInStringFormat:function(e){if(e===1/0)return"Fri, 31 Dec 9999 23:59:59 GMT";var t=new Date;return t.setTime(t.getTime()+1e3*e),t.toGMTString()}};if(n)switch(n.constructor){case Number:s="; expires="+c.getInStringFormat(n)+n===1/0?"":"; max-age="+n;break;case String:s="; expires="+n;break;case Date:s="; expires="+n.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+s+(i?"; domain="+i:"")+(o?"; path="+o:"")+(a?"; secure":""),!0},removeItem:function(e,t,n){return this.hasItem(e)?(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(t?"; path="+t:""),!0):!1},hasItem:function(e){return e?new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie):!1},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=e.length,n=0;t>n;n++)e[n]=decodeURIComponent(e[n]);return e}},c.getPhotos=function(e,t){s.jsonpCall("/api/v2/photo?albumid="+e+"&access_token="+c.getToken(),function(e){t(e)})},c.getCheckins=function(e){s.jsonpCall("/api/v2/checkin?access_token="+c.getToken(),function(t){e(t)})},c.getAlbums=function(e){s.jsonpCall("/api/v2/album?access_token="+c.getToken(),function(t){e(t)})},c.getAudios=function(e){s.jsonpCall("/api/v2/audio?access_token="+c.getToken(),function(t){e(t)})},c.getMentions=function(e){s.jsonpCall("/api/v2/mention?access_token="+c.getToken(),function(t){e(t)})},c.getFollowings=function(e){s.jsonpCall("/api/v2/following?access_token="+c.getToken(),function(t){e(t)})},c.getEvents=function(e){s.jsonpCall("/api/v2/event?access_token="+c.getToken(),function(t){e(t)})},c.getPosts=function(e){s.jsonpCall("/api/v2/post?access_token="+c.getToken(),function(t){e(t)})},c.getCompanies=function(e){s.jsonpCall("/api/v2/company?access_token="+c.getToken(),function(t){e(t)})},c.getGroups=function(e){s.jsonpCall("/api/v2/group?access_token="+c.getToken(),function(t){e(t)})},c.getStatuses=function(e){s.jsonpCall("/api/v2/status?access_token="+c.getToken(),function(t){e(t)})},c.getContacts=function(e,t){s.jsonpCall("/api/v2/contact?nextcursor="+e+"&access_token="+c.getToken(),function(e){t(e)})},c.getVideos=function(e){s.jsonpCall("/api/v2/video?access_token="+c.getToken(),function(t){e(t)})},c.getLikes=function(e){s.jsonpCall("/api/v2/like?access_token="+c.getToken(),function(t){e(t)})},c.postStatus=function(e,t,n,o,i,a,u){s.jsonpCall("/api/v2/status/js?title="+e+"&url="+t+"&imageurl="+o+"&status="+n+"&caption="+i+"&description="+a+"&access_token="+c.getToken(),function(e){u(e)})},c.getUserProfile=function(e){s.jsonpCall("/api/v2/userprofile?access_token="+c.getToken(),function(t){e(t)})},c.postMessagePOST=function(e,t,n,o){s.xhttpCall("POST",{},"/api/v2/message?to="+e+"&subject="+t+"&message="+n+"&access_token="+c.getToken(),function(e){o(e)})},c.postStatusPOST=function(e,t,n,o,i,a,u){s.xhttpCall("POST",{},"/api/v2/status?title="+e+"&url="+t+"&imageurl="+o+"&status="+n+"&caption="+i+"&description="+a+"&access_token="+c.getToken(),function(e){u(e)})},c.postMessage=function(e,t,n,o){s.jsonpCall("/api/v2/message/js?to="+e+"&subject="+t+"&message="+n+"&access_token="+c.getToken(),function(e){o(e)})},c.getPage=function(e,t){s.jsonpCall("/api/v2/page?pagename="+e+"&access_token="+c.getToken(),function(e){t(e)})},c.checkEmailAvailability=function(e,t){s.jsonpCall("/identity/v2/auth/email?email="+e+"&apikey="+c.getApiKey(),function(e){t(e)})},c.checkUserNameAvailability=function(e,t){s.jsonpCall("/identity/v2/auth/username?username="+e+"&apikey="+c.getApiKey(),function(e){t(e)})},c.loginByEmail=function(e,t,n,o,i,a,u){s.jsonpCall("/identity/v2/auth/login?email="+e+"&password="+t+"&verificationurl="+n+"&loginurl="+o+"&emailtemplate="+i+"&g-recaptcha-response="+a+"&apikey="+c.getApiKey(),function(e){u(e)})},c.loginByUserName=function(e,t,n,o,i,a,u){s.jsonpCall("/identity/v2/auth/login?username="+e+"&password="+t+"&verificationurl="+n+"&loginurl="+o+"&emailtemplate="+i+"&g-recaptcha-response="+a+"&apikey="+c.getApiKey(),function(e){u(e)})},c.readAllProfilesByToken=function(e){s.jsonpCall("/identity/v2/auth/account?access_token="+c.getToken()+"&apikey="+c.getApiKey(),function(t){e(t)})},c.socialIdentity=function(e){s.jsonpCall("/identity/v2/auth/socialidentity?access_token="+c.getToken()+"&apikey="+c.getApiKey(),function(t){e(t)})},c.validateAccessToken=function(e){s.jsonpCall("/identity/v2/auth/access_token/validate?access_token="+c.getToken()+"&apikey="+c.getApiKey(),function(t){e(t)})},c.verifyEmail=function(e,t,n,o){s.jsonpCall("/identity/v2/auth/email?verificationtoken="+e+"&url="+encodeURIComponent(t)+"&welcomeemailtemplate="+n+"&apikey="+c.getApiKey(),function(e){o(e)})},c.deleteAccount=function(e,t){s.jsonpCall("/identity/v2/auth/account/delete?deletetoken="+e+"&apikey="+c.getApiKey(),function(e){t(e)})},c.accessTokenInvalidate=function(e){s.jsonpCall("/identity/v2/auth/access_token/invalidate?access_token="+c.getToken()+"&apikey="+c.getApiKey(),function(t){e(t)})},c.getSecurityQuestionsByAccessToken=function(e){s.jsonpCall("/identity/v2/auth/securityquestion/accesstoken?access_token="+c.getToken()+"&apikey="+c.getApiKey(),function(t){e(t)})},c.getSecurityQuestionsByEmail=function(e,t){s.jsonpCall("/identity/v2/auth/securityquestion/email?email="+e+"&apikey="+c.getApiKey(),function(e){t(e)})},c.getSecurityQuestionsByUserName=function(e,t){s.jsonpCall("/identity/v2/auth/securityquestion/username?username="+e+"&apikey="+c.getApiKey(),function(e){t(e)})},c.getSecurityQuestionsByPhone=function(e,t){s.jsonpCall("/identity/v2/auth/securityquestion/phone?phone="+encodeURIComponent(e)+"&apikey="+c.getApiKey(),function(e){t(e)})},c.getCustomObjectByToken=function(e,t){s.jsonpCall("/identity/v2/auth/customobject?access_token="+c.getToken()+"&objectname="+e+"&apikey="+c.getApiKey(),function(e){t(e)})},c.getCustomObjectByRecordIdAndToken=function(e,t,n){s.jsonpCall("/identity/v2/auth/customobject/"+t+"?access_token="+c.getToken()+"&objectname="+e+"&apikey="+c.getApiKey(),function(e){n(e)})},c.GoogleJWT=function(e,t){s.jsonpCall("/api/v2/access_token/googlejwt?key="+c.getApiKey()+"&id_token="+e,function(e){n("LRTokenKey",e.access_token),t(e)})},c.getToken=function(){return sessionStorage.getItem(a)},c.getApiKey=function(){return t("lrApiKey")?(apikey=t("lrApiKey"),t("lrApiKey")):void console.log("API Key not found, The API Key needs to be initialized for this API Call")},c.addEmail=function(e,t,n,o){s.xhttpCall("POST",e,"/identity/v2/auth/email?access_token="+c.getToken()+"&verificationurl="+encodeURIComponent(t)+"&emailtemplate="+n,function(e){o(e)})},c.sendForgotPassword=function(e,t,n,o){s.xhttpCall("POST",e,"/identity/v2/auth/password?resetpasswordurl="+encodeURIComponent(t)+"&emailtemplate="+n,function(e){o(e)})},c.userRegistrationByEmail=function(e,t,n,o,i){s.xhttpCall("POST",e,"/identity/v2/auth/register?sott="+t+"&verificationurl="+encodeURIComponent(n)+"&emailtemplate="+o,function(e){i(e)})},c.loginByEmailPOST=function(e,t,n,o,i,a){s.xhttpCall("POST",e,"/identity/v2/auth/login?verificationurl="+encodeURIComponent(t)+"&loginurl="+n+"&emailtemplate="+o+"&g-recaptcha-response="+i,function(e){a(e)})},c.loginByUserNamePOST=function(e,t,n,o,i,a){s.xhttpCall("POST",e,"/identity/v2/auth/login?verificationurl="+encodeURIComponent(t)+"&loginurl="+n+"&emailtemplate="+o+"&g-recaptcha-response="+i,function(e){a(e)})},c.createCustomObjectByToken=function(e,t,n,o){s.xhttpCall("POST",e,"/identity/v2/auth/customobject?access_token="+c.getToken()+"&objectname="+t,function(e){o(e)})},c.changePassword=function(e,t){s.xhttpCall("PUT",e,"/identity/v2/auth/password?access_token="+c.getToken(),function(e){t(e)})},c.linkSocialIdentities=function(e,t){s.xhttpCall("PUT",e,"/identity/v2/auth/socialidentity?access_token="+c.getToken(),function(e){t(e)})},c.resendEmailVerification=function(e,t,n,o){s.xhttpCall("PUT",e,"/identity/v2/auth/register?verificationurl="+t+"&emailtemplate="+n,function(e){o(e)})},c.resetPasswordByResetToken=function(e,t){s.xhttpCall("PUT",e,"/identity/v2/auth/password",function(e){t(e)})},c.resetPasswordBySecurityQuestion=function(e,t){s.xhttpCall("PUT",e,"/identity/v2/auth/password/securityanswer",function(e){t(e)})},c.setUserName=function(e,t){s.xhttpCall("PUT",e,"/identity/v2/auth/username?access_token="+c.getToken(),function(e){t(e)})},c.updateProfileByToken=function(e,t,n,o,i){s.xhttpCall("PUT",e,"/identity/v2/auth/account?access_token="+c.getToken()+"&verificationurl="+t+"&emailtemplate="+n+"&smstemplate="+o,function(e){i(e)})},c.updateSecurityQuestionByToken=function(e,t){s.xhttpCall("PUT",e,"/identity/v2/auth/account?access_token="+c.getToken(),function(e){t(e)})},c.updateCustomObjectByObjectRecordIdAndToken=function(e,t,n,o,i){s.xhttpCall("PUT",e,"/identity/v2/auth/customobject/"+o+"?access_token="+c.getToken()+"&objectname="+t+"&updatetype="+n,function(e){i(e)})},c.deleteAccountWithEmailConfirmation=function(e,t,n){s.xhttpCall("DELETE",{},"/identity/v2/auth/account?access_token="+c.getToken()+"&deleteurl="+e+"&emailtemplate="+t,function(e){n(e)})},c.removeEmail=function(e,t){s.xhttpCall("DELETE",e,"/identity/v2/auth/email?access_token="+c.getToken(),function(e){t(e)})},c.unlinkSocialIdentity=function(e,t){s.xhttpCall("DELETE",e,"/identity/v2/auth/socialidentity?access_token="+c.getToken(),function(e){t(e)})},c.deleteCustomObjectByRecordIdAndToken=function(e,t,n){s.xhttpCall("DELETE",{},"/identity/v2/auth/customobject/"+t+"?access_token="+c.getToken()+"&objectname="+e,function(e){n(e)})},c.postMessageAPI=c.postMessagePOST,c.statusPostingPOST=c.postStatusPOST,c.getLoginByEmail=c.loginByEmail,c.LoginByEmail=c.loginByEmailPOST,c.getLoginByUserName=c.loginByUserName,c.LoginByUserName=c.loginByUserNamePOST,s.jsonpCall=function(e,t){var n="Loginradius"+Math.floor(1e18*Math.random()+1);window[n]=function(e){t(e);try{delete window[n]}catch(i){window[n]=void 0}document.body.removeChild(o)};var o=document.createElement("script");o.src=i+e+(-1!=e.indexOf("?")?"&":"?")+"callback="+n,o.type="text/javascript",document.body.appendChild(o)},s.xhttpCall=function(e,t,n,o){var a=new XMLHttpRequest;a.onreadystatechange=function(){4==this.readyState&&200==this.status?o(a.responseText):4==this.readyState&&console.log("Error making API call")},a.open(e,i+n+(-1!=n.indexOf("?")?"&":"?")+"apikey="+c.getApiKey()),a.setRequestHeader("Content-type","application/json"),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.onerror=function(){console.log("Error with XMLHttpRequest")},a.send(JSON.stringify(t))},s.addEvent=function(e,t,n){var o=[];t instanceof Array?o=t:o.push(t);for(var i=0;i<o.length;i++)o[i].attachEvent?o[i].attachEvent("on"+e,function(e){n(e)}):o[i].addEventListener&&o[i].addEventListener(e,n,!1)},s.addEvent("message",window,o),window.loginradiushtml5passToken=function(e){sessionStorage.setItem(a,e),c.isauthenticated=!0;var t=setInterval(function(){c.onlogin&&(c.onlogin(),clearInterval(t))},100)};var u=hash.get("lr-token");return u&&(window.opener&&window.opener.loginradiushtml5passToken?(window.opener.loginradiushtml5passToken(u),document.write('<style type="text/css">body { display: none !important; } </style>'),window.close()):window.loginradiushtml5passToken(u)),c.initSDK=function(e){n("lrApiKey",e.key)},c}();
