var LoginRadiusSDK=(function(){(function(a,b){"use strict";var c=function(){var b=function(){var b=a.location.hash?a.location.hash.substr(1).split("&"):[],c={};for(var d=0;d<b.length;d++){var e=b[d].split("=");c[e[0]]=decodeURIComponent(e[1])}return c};var c=function(b){var c=[];for(var d in b){c.push(d+"="+encodeURIComponent(b[d]))}a.location.hash=c.join("&")};return{get:function(a){var c=b();if(a){return c[a]}else{return c}},add:function(a){var d=b();for(var e in a){d[e]=a[e]}c(d)},remove:function(a){a=typeof a=="string"?[a]:a;var d=b();for(var e=0;e<a.length;e++){delete d[a[e]]}c(d)},clear:function(){c({})}}}();a.hash=c})(window)
var apiDomain="https://api.loginradius.com";var token='LRTokenKey';var util={};var module={};var onlogin=function(){};module.isauthenticated=!1;module.setLoginCallback=function(fn){module.onlogin=fn};function isLocalStorageNameSupported(lsName){if(window[lsName]){var testKey='test',storage=window[lsName];try{storage.setItem(testKey,'1');storage.removeItem(testKey);return!0}catch(error){return!1}}else{return!1}};function getBrowserStorage(key){if(isLocalStorageNameSupported('localStorage')&&localStorage.getItem(key)!==null&&localStorage.getItem(key)!==undefined&&localStorage.getItem(key)!==""){return localStorage.getItem(key)}
if(isLocalStorageNameSupported('sessionStorage')&&sessionStorage.getItem(key)!==null&&sessionStorage.getItem(key)!==undefined&&sessionStorage.getItem(key)!==""){return sessionStorage.getItem(key)}
return documentCookies.getItem(key)};function setBrowserStorage(key,value){var cookieFallback=!0;if(isLocalStorageNameSupported('localStorage')){localStorage.setItem(key,value);cookieFallback=!1}
if(isLocalStorageNameSupported('sessionStorage')){sessionStorage.setItem(key,value);cookieFallback=!1}
if(cookieFallback){documentCookies.setItem(key,value,'',window.location)}};documentCookies={getItem:function(sKey){if(!sKey){return null}
return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(sKey,sValue,vEnd,sPath,sDomain,bSecure){if(!sKey||/^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)){return!1}
var sExpires="";var vExpiryDate={getInStringFormat:function(nMaxAge){if(nMaxAge===Infinity){return "Fri, 31 Dec 9999 23:59:59 GMT"}
var dDate=new Date();dDate.setTime(dDate.getTime()+(nMaxAge*1000));return dDate.toGMTString()}}
if(vEnd){switch(vEnd.constructor){case Number:sExpires="; expires="+vExpiryDate.getInStringFormat(vEnd)+vEnd===Infinity?"":"; max-age="+vEnd;break;case String:sExpires="; expires="+vEnd;break;case Date:sExpires="; expires="+vEnd.toUTCString();break}}
document.cookie=encodeURIComponent(sKey)+"="+encodeURIComponent(sValue)+sExpires+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"")+(bSecure?"; secure":"");return!0},removeItem:function(sKey,sPath,sDomain){if(!this.hasItem(sKey)){return!1}
document.cookie=encodeURIComponent(sKey)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"");return!0},hasItem:function(sKey){if(!sKey){return!1}
return(new RegExp("(?:^|;\\s*)"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie)},keys:function(){var aKeys=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(var nLen=aKeys.length,nIdx=0;nIdx<nLen;nIdx++){aKeys[nIdx]=decodeURIComponent(aKeys[nIdx])}
return aKeys}};module.getPhotos=function(albumId,handle){util.jsonpCall("/api/v2/photo?albumid="+albumId+"&access_token="+module.getToken(),function(data){handle(data)})};module.getCheckins=function(handle){util.jsonpCall("/api/v2/checkin?access_token="+module.getToken(),function(data){handle(data)})};module.getAlbums=function(handle){util.jsonpCall("/api/v2/album?access_token="+module.getToken(),function(data){handle(data)})};module.getAudios=function(handle){util.jsonpCall("/api/v2/audio?access_token="+module.getToken(),function(data){handle(data)})};module.getMentions=function(handle){util.jsonpCall("/api/v2/mention?access_token="+module.getToken(),function(data){handle(data)})};module.getFollowings=function(handle){util.jsonpCall("/api/v2/following?access_token="+module.getToken(),function(data){handle(data)})};module.getEvents=function(handle){util.jsonpCall("/api/v2/event?access_token="+module.getToken(),function(data){handle(data)})};module.getPosts=function(handle){util.jsonpCall("/api/v2/post?access_token="+module.getToken(),function(data){handle(data)})};module.getCompanies=function(handle){util.jsonpCall("/api/v2/company?access_token="+module.getToken(),function(data){handle(data)})};module.getGroups=function(handle){util.jsonpCall("/api/v2/group?access_token="+module.getToken(),function(data){handle(data)})};module.getStatuses=function(handle){util.jsonpCall("/api/v2/status?access_token="+module.getToken(),function(data){handle(data)})};module.getContacts=function(cursor,handle){util.jsonpCall("/api/v2/contact?nextcursor="+cursor+"&access_token="+module.getToken(),function(data){handle(data)})};module.getVideos=function(handle){util.jsonpCall("/api/v2/video?access_token="+module.getToken(),function(data){handle(data)})};module.getLikes=function(handle){util.jsonpCall("/api/v2/like?access_token="+module.getToken(),function(data){handle(data)})};module.postStatus=function(title,url,status,imageurl,caption,description,handle){util.jsonpCall("/api/v2/status/js?title="+title+"&url="+url+"&imageurl="+imageurl+"&status="+status+"&caption="+caption+"&description="+description+"&access_token="+module.getToken(),function(data){handle(data)})};module.getUserProfile=function(handle){util.jsonpCall("/api/v2/userprofile?access_token="+module.getToken(),function(data){handle(data)})};module.postMessageAPI=function(to,subject,message,handle){util.xhttpCall("POST",{},"/api/v2/message?to="+to+"&subject="+subject+"&message="+message+"&access_token="+module.getToken(),function(data){handle(data)})};module.statusPostingPOST=function(title,url,status,imageurl,caption,description,handle){util.xhttpCall("POST",{},"/api/v2/status?title="+title+"&url="+url+"&imageurl="+imageurl+"&status="+status+"&caption="+caption+"&description="+description+"&access_token="+module.getToken(),function(data){handle(data)})};module.postMessage=function(to,subject,message,handle){util.jsonpCall("/api/v2/message/js?to="+to+"&subject="+subject+"&message="+message+"&access_token="+module.getToken(),function(data){handle(data)})};module.getPage=function(pagename,handle){util.jsonpCall("/api/v2/page?pagename="+pagename+"&access_token="+module.getToken(),function(data){handle(data)})};module.checkEmailAvailability=function(email,handle){util.jsonpCall("/identity/v2/auth/email?email="+email+"&apikey="+module.getApiKey(),function(data){handle(data)})};module.checkUserNameAvailability=function(username,handle){util.jsonpCall("/identity/v2/auth/username?username="+username+"&apikey="+module.getApiKey(),function(data){handle(data)})};module.getLoginByEmail=function(email,password,verificationurl,loginurl,emailtemplate,grecaptcharesponse,handle){util.jsonpCall("/identity/v2/auth/login?email="+email+"&password="+password+"&verificationurl="+verificationurl+"&loginurl="+loginurl+"&emailtemplate="+emailtemplate+"&g-recaptcha-response="+grecaptcharesponse+"&apikey="+module.getApiKey(),function(data){handle(data)})};module.getLoginByUserName=function(username,password,verificationurl,loginurl,emailtemplate,grecaptcharesponse,handle){util.jsonpCall("/identity/v2/auth/login?username="+username+"&password="+password+"&verificationurl="+verificationurl+"&loginurl="+loginurl+"&emailtemplate="+emailtemplate+"&g-recaptcha-response="+grecaptcharesponse+"&apikey="+module.getApiKey(),function(data){handle(data)})};module.readAllProfilesByToken=function(handle){util.jsonpCall("/identity/v2/auth/account?access_token="+module.getToken()+"&apikey="+module.getApiKey(),function(data){handle(data)})};module.socialIdentity=function(handle){util.jsonpCall("/identity/v2/auth/socialidentity?access_token="+module.getToken()+"&apikey="+module.getApiKey(),function(data){handle(data)})};module.validateAccessToken=function(handle){util.jsonpCall("/identity/v2/auth/access_token/validate?access_token="+module.getToken()+"&apikey="+module.getApiKey(),function(data){handle(data)})};module.verifyEmail=function(verificationtoken,url,welcomeemailtemplate,handle){util.jsonpCall("/identity/v2/auth/email?verificationtoken="+verificationtoken+"&url="+encodeURIComponent(url)+"&welcomeemailtemplate="+welcomeemailtemplate+"&apikey="+module.getApiKey(),function(data){handle(data)})};module.deleteAccount=function(deletetoken,handle){util.jsonpCall("/identity/v2/auth/account/delete?deletetoken="+deletetoken+"&apikey="+module.getApiKey(),function(data){handle(data)})};module.accessTokenInvalidate=function(handle){util.jsonpCall("/identity/v2/auth/access_token/invalidate?access_token="+module.getToken()+"&apikey="+module.getApiKey(),function(data){handle(data)})};module.getSecurityQuestionsByAccessToken=function(handle){util.jsonpCall("/identity/v2/auth/securityquestion/accesstoken?access_token="+module.getToken()+"&apikey="+module.getApiKey(),function(data){handle(data)})};module.getSecurityQuestionsByEmail=function(email,handle){util.jsonpCall("/identity/v2/auth/securityquestion/email?email="+email+"&apikey="+module.getApiKey(),function(data){handle(data)})};module.getSecurityQuestionsByUserName=function(username,handle){util.jsonpCall("/identity/v2/auth/securityquestion/username?username="+username+"&apikey="+module.getApiKey(),function(data){handle(data)})};module.getSecurityQuestionsByPhone=function(phone,handle){util.jsonpCall("/identity/v2/auth/securityquestion/phone?phone="+encodeURIComponent(phone)+"&apikey="+module.getApiKey(),function(data){handle(data)})};module.getCustomObjectByToken=function(objectname,handle){util.jsonpCall("/identity/v2/auth/customobject?access_token="+module.getToken()+"&objectname="+objectname+"&apikey="+module.getApiKey(),function(data){handle(data)})};module.getCustomObjectByRecordIdAndToken=function(objectname,objectrecordid,handle){util.jsonpCall("/identity/v2/auth/customobject/"+objectrecordid+"?access_token="+module.getToken()+"&objectname="+objectname+"&apikey="+module.getApiKey(),function(data){handle(data)})};module.GoogleJWT=function(id_token,handle){util.jsonpCall("/api/v2/access_token/googlejwt?key="+module.getApiKey()+"&id_token="+id_token,function(data){setBrowserStorage("LRTokenKey",data.access_token);handle(data)})};module.getToken=function(){return sessionStorage.getItem(token)};module.getApiKey=function(){if(getBrowserStorage("lrApiKey")){apikey=getBrowserStorage("lrApiKey");return getBrowserStorage("lrApiKey")}
else{console.log("API Key not found, The API Key needs to be initialized for this API Call")}};module.addEmail=function(jsObject,verificationurl,emailtemplate,handle){util.xhttpCall("POST",jsObject,"/identity/v2/auth/email?access_token="+module.getToken()+"&verificationurl="+encodeURIComponent(verificationurl)+"&emailtemplate="+emailtemplate,function(data){handle(data)})};module.sendForgotPassword=function(jsObject,resetpasswordurl,emailtemplate,handle){util.xhttpCall("POST",jsObject,"/identity/v2/auth/password?resetpasswordurl="+encodeURIComponent(resetpasswordurl)+"&emailtemplate="+emailtemplate,function(data){handle(data)})};module.userRegistrationByEmail=function(jsObject,sott,verificationurl,emailtemplate,handle){util.xhttpCall("POST",jsObject,"/identity/v2/auth/register?sott="+sott+"&verificationurl="+encodeURIComponent(verificationurl)+"&emailtemplate="+emailtemplate,function(data){handle(data)})};module.loginByEmail=function(jsObject,verificationurl,loginurl,emailtemplate,grecaptcharesponse,handle){util.xhttpCall("POST",jsObject,"/identity/v2/auth/login?verificationurl="+encodeURIComponent(verificationurl)+"&loginurl="+loginurl+"&emailtemplate="+emailtemplate+"&g-recaptcha-response="+grecaptcharesponse,function(data){handle(data)})};module.loginByUserName=function(jsObject,verificationurl,loginurl,emailtemplate,grecaptcharesponse,handle){util.xhttpCall("POST",jsObject,"/identity/v2/auth/login?verificationurl="+encodeURIComponent(verificationurl)+"&loginurl="+loginurl+"&emailtemplate="+emailtemplate+"&g-recaptcha-response="+grecaptcharesponse,function(data){handle(data)})};module.createCustomObjectByToken=function(jsObject,objectname,emailtemplate,handle){util.xhttpCall("POST",jsObject,"/identity/v2/auth/customobject?access_token="+module.getToken()+"&objectname="+objectname,function(data){handle(data)})};module.changePassword=function(jsObject,handle){util.xhttpCall("PUT",jsObject,"/identity/v2/auth/password?access_token="+module.getToken(),function(data){handle(data)})};module.linkSocialIdentities=function(jsObject,handle){util.xhttpCall("PUT",jsObject,"/identity/v2/auth/socialidentity?access_token="+module.getToken(),function(data){handle(data)})};module.resendEmailVerification=function(jsObject,verificationurl,emailtemplate,handle){util.xhttpCall("PUT",jsObject,"/identity/v2/auth/register?verificationurl="+verificationurl+"&emailtemplate="+emailtemplate,function(data){handle(data)})};module.resetPasswordByResetToken=function(jsObject,handle){util.xhttpCall("PUT",jsObject,"/identity/v2/auth/password",function(data){handle(data)})};module.resetPasswordBySecurityQuestion=function(jsObject,handle){util.xhttpCall("PUT",jsObject,"/identity/v2/auth/password/securityanswer",function(data){handle(data)})};module.setUserName=function(jsObject,handle){util.xhttpCall("PUT",jsObject,"/identity/v2/auth/username?access_token="+module.getToken(),function(data){handle(data)})};module.updateProfileByToken=function(jsObject,verificationurl,emailtemplate,smstemplate,handle){util.xhttpCall("PUT",jsObject,"/identity/v2/auth/account?access_token="+module.getToken()+"&verificationurl="+verificationurl+"&emailtemplate="+emailtemplate+"&smstemplate="+smstemplate,function(data){handle(data)})};module.updateSecurityQuestionByToken=function(jsObject,handle){util.xhttpCall("PUT",jsObject,"/identity/v2/auth/account?access_token="+module.getToken(),function(data){handle(data)})};module.updateCustomObjectByObjectRecordIdAndToken=function(jsObject,objectname,updatetype,objectrecordid,handle){util.xhttpCall("PUT",jsObject,"/identity/v2/auth/customobject/"+objectrecordid+"&access_token="+module.getToken()+"&objectname="+objectname+"&updatetype="+updatetype,function(data){handle(data)})};module.deleteAccountWithEmailConfirmation=function(deleteurl,emailtemplate,handle){util.xhttpCall("DELETE",{},"/identity/v2/auth/account?access_token="+module.getToken()+"&deleteurl="+deleteurl+"&emailtemplate="+emailtemplate,function(data){handle(data)})};module.removeEmail=function(jsObject,handle){util.xhttpCall("DELETE",jsObject,"/identity/v2/auth/email?access_token="+module.getToken(),function(data){handle(data)})};module.unlinkSocialIdentity=function(jsObject,handle){util.xhttpCall("DELETE",jsObject,"/identity/v2/auth/socialidentity?access_token="+module.getToken(),function(data){handle(data)})};module.deleteCustomObjectByRecordIdAndToken=function(objectname,objectrecordid,handle){util.xhttpCall("DELETE",{},"/identity/v2/auth/customobject/"+objectrecordid+"?access_token="+module.getToken()+"&objectname="+objectname,function(data){handle(data)})};util.jsonpCall=function(path,handle){var func='Loginradius'+Math.floor((Math.random()*1000000000000000000)+1);window[func]=function(data){handle(data);try{delete window[func]}
catch(e){window[func]=undefined}
document.body.removeChild(js)};var js=document.createElement('script');js.src=apiDomain+path+(path.indexOf('?')!=-1?'&':'?')+'callback='+func;js.type="text/javascript";document.body.appendChild(js)};util.xhttpCall=function(method,jsObject,path,handle){var xhttpcall=new XMLHttpRequest();xhttpcall.onreadystatechange=function()
{if(this.readyState==4&&this.status==200)
{handle(xhttpcall.responseText)}
else if(this.readyState==4)
{console.log("Error making API call")}};xhttpcall.open(method,apiDomain+path+(path.indexOf('?')!=-1?'&':'?')+"apikey="+module.getApiKey());xhttpcall.setRequestHeader("Content-type","application/json");xhttpcall.setRequestHeader('X-Requested-With','XMLHttpRequest');xhttpcall.onerror=function(){console.log("Error with XMLHttpRequest")};xhttpcall.send(JSON.stringify(jsObject))};util.addEvent=function(type,element,handle){var elements=[];if(element instanceof Array){elements=element}else{elements.push(element)}
for(var i=0;i<elements.length;i++){if(elements[i].attachEvent){elements[i].attachEvent("on"+type,function(e){handle(e)})}else if(elements[i].addEventListener){elements[i].addEventListener(type,handle,!1)}}};function receiveToken(event){if(event.origin.indexOf("hub.loginradius.com")==-1){return}
loginradiushtml5passToken(event.data)}
util.addEvent("message",window,receiveToken);window.loginradiushtml5passToken=function(tok){sessionStorage.setItem(token,tok);module.isauthenticated=!0;var intVal=setInterval(function(){if(module.onlogin){module.onlogin();clearInterval(intVal)}},100)};var lrToken=hash.get('lr-token');if(lrToken){if(window.opener&&window.opener.loginradiushtml5passToken){window.opener.loginradiushtml5passToken(lrToken);document.write('<style type="text/css">body { display: none !important; } </style>');window.close()}else{window.loginradiushtml5passToken(lrToken)}}
module.initSDK=function(settings){setBrowserStorage("lrApiKey",settings.key)}
return module})()
